#include <iostream>
//Автор: Моисеенко Сергей Дата:20.02.2022
using namespace std;
//Функция истинности баланса и расположения скобок
bool fun(char *arr,char *arr1){
    int k=0;//Счётчик скобок, направленных влево
    for (int i=0;arr[i]!='\0';i++){//Цикл для проверки истинности расположения скобок
        if (arr[i]=='(' or arr[i]=='{' or arr[i]=='[' or arr[i]=='<'){//Поиск и подсчёт скобок, направленных влево
            arr1[k++]=arr[i];//Ввод в новую строку скобок, направленных влево
        }
        else{//Если встретился любой другой символ
            if (arr[i]==')' or arr[i]=='}' or arr[i]==']' or arr[i]=='>'){//Поиск скобок, направленных вправо
                if (k==0 or (arr[i]==')' and arr1[k-1]!='(') or (arr[i]=='}' and arr1[k-1]!='{') or (arr[i]==']' and arr1[k-1]!='[') or (arr[i]=='>' and arr1[k-1]!='<')){
                    return false;
                }//Условие неправильного расположения скобок
                k--;//Нахождение пары скобок
            }
        }
    }
    if (k>0){//Условие на истинность баланса скобок
         return false;//Есть лишние скобки
    }
    else{
        return true;//Нет лишних скобок
    }
}

int main()
{
    
    char arr[]="(ab[<>]({fg1})tyo)";//Строка со скобками
    int size=sizeof(arr)/sizeof(char);//Длина строки
    char arr1[size];//Новая строка для сравнения
    if (fun(arr,arr1)==true){//Условие истинности для баланса и расположения скобок
        cout<<"Есть баланс и верное расположение скобок";
    }
    else{
        cout<<"Нет баланса и верного расположения скобок";
    }
    
}
